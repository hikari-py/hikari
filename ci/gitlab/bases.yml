# Copyright Â© Nekoka.tt 2019-2020
#
# This file is part of Hikari.
#
# Hikari is free software: you can redistribute it and/or modify
# it under the terms of the GNU Lesser General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# Hikari is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Lesser General Public License for more details.
#
# You should have received a copy of the GNU Lesser General Public License
# along with Hikari. If not, see <https://www.gnu.org/licenses/>.

###
### All job settings.
###
.any-job:
  artifacts:
    expire_in: 1 month

###
### Mark a job as having reactive defaults, such as firing on merge requests,
### new tags, new branches, schedules, new commits; all by default.
###
.reactive-job:
  extends: .any-job
  only:
    - branches
    - merge_requests
    - tags
    - schedules

###
### Busybox 1.3.1 with musl libc
###
### Base to provide a tiny busybox install with nothing in it.
### Used by some stages to move files produced by other stages into
### the correct directory structure.
###
.busybox:musl:
  extends: .any-job
  image: busybox:1.31.1-musl

###
### CPython 3.8.0 configuration.
###
.cpython:3.8.0:
  extends: .any-job
  image: python:3.8.0

###
### CPython 3.8.1 configuration.
###
.cpython:3.8.1:
  extends: .any-job
  image: python:3.8.1

###
### CPython 3.8.2 configuration.
###
.cpython:3.8.2:
  extends: .any-job
  image: python:3.8.2

###
### CPython 3.9.0 configuration.
###
.cpython:3.9.0:
  extends: .any-job
  image: python:3.9-rc

###
### Most recent stable CPython release.
###
.cpython:
  extends: .any-job
  extends: .cpython:3.8.2
